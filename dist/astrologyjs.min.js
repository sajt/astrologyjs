!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("https"),require("http")):"function"==typeof define&&define.amd?define(["exports","https","http"],n):n(t.astrologyjs=t.astrologyjs||{},t.https,t.http)}(this,function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t.default:t}function o(t,n){return n={exports:{}},t(n,n.exports),n.exports}n="default"in n?n.default:n,e="default"in e?e.default:e;var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=r(o(function(t,n){n.__esModule=!0,n.default=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}})),u=o(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),s=o(function(t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)}),l=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},c=l,f=function(t,n,e){if(c(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=h,d=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},y=function(t){try{return!!t()}catch(t){return!0}},v=!y(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),m=h,g=u.document,b=m(g)&&m(g.createElement),w=function(t){return b?g.createElement(t):{}},_=!v&&!y(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a}),j=h,x=d,C=_,k=function(t,n){if(!j(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!j(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!j(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!j(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},M=Object.defineProperty,O={f:v?Object.defineProperty:function(t,n,e){if(x(t),n=k(n,!0),x(e),C)try{return M(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},P=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},T=O,S=P,E=v?function(t,n,e){return T.f(t,n,S(1,e))}:function(t,n,e){return t[n]=e,t},L=u,D=s,R=f,A=E,F="prototype",I=function(t,n,e){var r,o,a,i=t&I.F,u=t&I.G,s=t&I.S,l=t&I.P,c=t&I.B,f=t&I.W,h=u?D:D[n]||(D[n]={}),p=h[F],d=u?L:s?L[n]:(L[n]||{})[F];u&&(e=n);for(r in e)(o=!i&&d&&void 0!==d[r])&&r in h||(a=o?d[r]:e[r],h[r]=u&&"function"!=typeof d[r]?e[r]:c&&o?R(a,L):f&&d[r]==a?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[F]=t[F],n}(a):l&&"function"==typeof a?R(Function.call,a):a,l&&((h.virtual||(h.virtual={}))[r]=a,t&I.R&&p&&!p[r]&&A(p,r,a)))};I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;var N=I,q=N;q(q.S+q.F*!v,"Object",{defineProperty:O.f});var G=s.Object,Y=function(t,n,e){return G.defineProperty(t,n,e)},B=o(function(t){t.exports={default:Y,__esModule:!0}}),W=r(o(function(t,n){n.__esModule=!0;var e=function(t){return t&&t.__esModule?t:{default:t}}(B);n.default=function(){function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,e.default)(t,o.key,o)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}()})),z={Planet:function(){function t(n,e,r,o){i(this,t),this.symbols={sun:"a",moon:"s",mercury:"d",venus:"f",earth:"g",mars:"h",jupiter:"j",saturn:"k",uranus:"ö",neptune:"ä",pluto:"#","south node":"?","north node":"ß",ceres:"A",pallas:"S",juno:"D",vesta:"F",lilith:"ç",cupido:"L",chiron:"l",nessus:"ò",pholus:"ñ",chariklo:"î",eris:"È",chaos:"Ê",fortuna:"%"},this.name=n,this.longitude=e,this.latitude=r,this.speed=o,this.symbol=this.symbols[n.toLowerCase()]}return W(t,[{key:"isRetrograde",value:function(){return this.speed<0}},{key:"isMajor",value:function(){return["sun","moon","mercury","venus","mars","jupiter","saturn","uranus","neptune","pluto","north node","south node"].indexOf(this.name.toLowerCase())>-1}}]),t}()},U=o(function(t){!function(n){function e(t,n,e,a){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),s=new h(a||[]);return u._invoke=function(t,n,e){var o=j;return function(a,i){if(o===C)throw new Error("Generator is already running");if(o===k){if("throw"===a)throw i;return d()}for(;;){var u=e.delegate;if(u){if("return"===a||"throw"===a&&u.iterator[a]===y){e.delegate=null;var s=u.iterator.return;if(s){var l=r(s,u.iterator,i);if("throw"===l.type){a="throw",i=l.arg;continue}}if("return"===a)continue}var l=r(u.iterator[a],u.iterator,i);if("throw"===l.type){e.delegate=null,a="throw",i=l.arg;continue}a="next",i=y;var c=l.arg;if(!c.done)return o=x,c;e[u.resultName]=c.value,e.next=u.nextLoc,e.delegate=null}if("next"===a)e.sent=e._sent=i;else if("throw"===a){if(o===j)throw o=k,i;e.dispatchException(i)&&(a="next",i=y)}else"return"===a&&e.abrupt("return",i);o=C;var l=r(t,n,e);if("normal"===l.type){o=e.done?k:x;var c={value:l.arg,done:e.done};if(l.arg!==M)return c;e.delegate&&"next"===a&&(i=y)}else"throw"===l.type&&(o=k,a="throw",i=l.arg)}}}(t,e,s),u}function r(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function o(){}function a(){}function i(){}function u(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function s(t){this.arg=t}function l(t){function n(e,o,a,i){var u=r(t[e],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c instanceof s?Promise.resolve(c.arg).then(function(t){n("next",t,a,i)},function(t){n("throw",t,a,i)}):Promise.resolve(c).then(function(t){l.value=t,a(l)},i)}i(u.arg)}"object"==typeof process&&process.domain&&(n=process.domain.bind(n));var e;this._invoke=function(t,r){function o(){return new Promise(function(e,o){n(t,r,e,o)})}return e=e?e.then(o,o):o()}}function c(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function f(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function p(t){if(t){var n=t[g];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(v.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=y,n.done=!0,n};return r.next=r}}return{next:d}}function d(){return{value:y,done:!0}}var y,v=Object.prototype.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.toStringTag||"@@toStringTag",w="object"==typeof t,_=n.regeneratorRuntime;if(_)w&&(t.exports=_);else{(_=n.regeneratorRuntime=w?t.exports:{}).wrap=e;var j="suspendedStart",x="suspendedYield",C="executing",k="completed",M={},O=i.prototype=o.prototype;a.prototype=O.constructor=i,i.constructor=a,i[b]=a.displayName="GeneratorFunction",_.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===a||"GeneratorFunction"===(n.displayName||n.name))},_.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(O),t},_.awrap=function(t){return new s(t)},u(l.prototype),_.async=function(t,n,r,o){var a=new l(e(t,n,r,o));return _.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},u(O),O[g]=function(){return this},O[b]="Generator",O.toString=function(){return"[object Generator]"},_.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},_.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!t)for(var n in this)"t"===n.charAt(0)&&v.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function n(n,r){return a.type="throw",a.arg=t,e.next=n,!!r}if(this.done)throw t;for(var e=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=v.call(o,"catchLoc"),u=v.call(o,"finallyLoc");if(i&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=n,o?this.next=o.finallyLoc:this.complete(a),M},complete:function(t,n){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&n&&(this.next=n)},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),f(e),M}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;f(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:p(t),resultName:n,nextLoc:e},M}}}}("object"==typeof a?a:"object"==typeof window?window:"object"==typeof self?self:a)}),H="object"==typeof a?a:"object"==typeof window?window:"object"==typeof self?self:a,Q=H.regeneratorRuntime&&Object.getOwnPropertyNames(H).indexOf("regeneratorRuntime")>=0,X=Q&&H.regeneratorRuntime;H.regeneratorRuntime=void 0;var Z=U;if(Q)H.regeneratorRuntime=X;else try{delete H.regeneratorRuntime}catch(t){H.regeneratorRuntime=void 0}var K=Z,J=Math.ceil,V=Math.floor,$=function(t){return isNaN(t=+t)?0:(t>0?V:J)(t)},tt=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},nt=$,et=tt,rt=E,ot={}.hasOwnProperty,at=function(t,n){return ot.call(t,n)},it={},ut={}.toString,st=function(t){return ut.call(t).slice(8,-1)},lt=st,ct=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==lt(t)?t.split(""):Object(t)},ft=tt,ht=function(t){return ct(ft(t))},pt=$,dt=Math.min,yt=function(t){return t>0?dt(pt(t),9007199254740991):0},vt=$,mt=Math.max,gt=Math.min,bt=ht,wt=yt,_t=function(t,n){return(t=vt(t))<0?mt(t+n,0):gt(t,n)},jt=u,xt="__core-js_shared__",Ct=jt[xt]||(jt[xt]={}),kt=function(t){return Ct[t]||(Ct[t]={})},Mt=0,Ot=Math.random(),Pt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Mt+Ot).toString(36))},Tt=kt("keys"),St=Pt,Et=function(t){return Tt[t]||(Tt[t]=St(t))},Lt=at,Dt=ht,Rt=function(t){return function(n,e,r){var o,a=bt(n),i=wt(a.length),u=_t(r,i);if(t&&e!=e){for(;i>u;)if((o=a[u++])!=o)return!0}else for(;i>u;u++)if((t||u in a)&&a[u]===e)return t||u||0;return!t&&-1}}(!1),At=Et("IE_PROTO"),Ft="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),It=function(t,n){var e,r=Dt(t),o=0,a=[];for(e in r)e!=At&&Lt(r,e)&&a.push(e);for(;n.length>o;)Lt(r,e=n[o++])&&(~Rt(a,e)||a.push(e));return a},Nt=Ft,qt=Object.keys||function(t){return It(t,Nt)},Gt=O,Yt=d,Bt=qt,Wt=v?Object.defineProperties:function(t,n){Yt(t);for(var e,r=Bt(n),o=r.length,a=0;o>a;)Gt.f(t,e=r[a++],n[e]);return t},zt=u.document&&document.documentElement,Ut=d,Ht=Wt,Qt=Ft,Xt=Et("IE_PROTO"),Zt=function(){},Kt="prototype",Jt=function(){var t,n=w("iframe"),e=Qt.length;for(n.style.display="none",zt.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Jt=t.F;e--;)delete Jt[Kt][Qt[e]];return Jt()},Vt=Object.create||function(t,n){var e;return null!==t?(Zt[Kt]=Ut(t),e=new Zt,Zt[Kt]=null,e[Xt]=t):e=Jt(),void 0===n?e:Ht(e,n)},$t=o(function(t){var n=kt("wks"),e=Pt,r=u.Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:e)("Symbol."+t))}).store=n}),tn=O.f,nn=at,en=$t("toStringTag"),rn=function(t,n,e){t&&!nn(t=e?t:t.prototype,en)&&tn(t,en,{configurable:!0,value:n})},on=Vt,an=P,un=rn,sn={};E(sn,$t("iterator"),function(){return this});var ln=tt,cn=function(t){return Object(ln(t))},fn=at,hn=cn,pn=Et("IE_PROTO"),dn=Object.prototype,yn=N,vn=rt,mn=E,gn=it,bn=function(t,n,e){t.prototype=on(sn,{next:an(1,e)}),un(t,n+" Iterator")},wn=rn,_n=Object.getPrototypeOf||function(t){return t=hn(t),fn(t,pn)?t[pn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?dn:null},jn=$t("iterator"),xn=!([].keys&&"next"in[].keys()),Cn="values",kn=function(){return this},Mn=function(t,n,e,r,o,a,i){bn(e,n,r);var u,s,l,c=function(t){if(!xn&&t in d)return d[t];switch(t){case"keys":case Cn:return function(){return new e(this,t)}}return function(){return new e(this,t)}},f=n+" Iterator",h=o==Cn,p=!1,d=t.prototype,y=d[jn]||d["@@iterator"]||o&&d[o],v=y||c(o),m=o?h?c("entries"):v:void 0,g="Array"==n?d.entries||y:y;if(g&&(l=_n(g.call(new t)))!==Object.prototype&&wn(l,f,!0),h&&y&&y.name!==Cn&&(p=!0,v=function(){return y.call(this)}),i&&(xn||p||!d[jn])&&mn(d,jn,v),gn[n]=v,gn[f]=kn,o)if(u={values:h?v:c(Cn),keys:a?v:c("keys"),entries:m},i)for(s in u)s in d||vn(d,s,u[s]);else yn(yn.P+yn.F*(xn||p),n,u);return u},On=function(t){return function(n,e){var r,o,a=String(et(n)),i=nt(e),u=a.length;return i<0||i>=u?t?"":void 0:(r=a.charCodeAt(i))<55296||r>56319||i+1===u||(o=a.charCodeAt(i+1))<56320||o>57343?t?a.charAt(i):r:t?a.slice(i,i+2):o-56320+(r-55296<<10)+65536}}(!0);Mn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=On(n,e),this._i+=t.length,{value:t,done:!1})});var Pn=function(){},Tn=function(t,n){return{value:n,done:!!t}},Sn=it,En=ht;Mn(Array,"Array",function(t,n){this._t=En(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Tn(1)):"keys"==n?Tn(0,e):"values"==n?Tn(0,t[e]):Tn(0,[e,t[e]])},"values");Sn.Arguments=Sn.Array,Pn("keys"),Pn("values"),Pn("entries");for(var Ln=u,Dn=E,Rn=it,An=$t("toStringTag"),Fn=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],In=0;In<5;In++){var Nn=Fn[In],qn=Ln[Nn],Gn=qn&&qn.prototype;Gn&&!Gn[An]&&Dn(Gn,An,Nn),Rn[Nn]=Rn.Array}var Yn,Bn,Wn,zn=st,Un=$t("toStringTag"),Hn="Arguments"==zn(function(){return arguments}()),Qn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),Un))?e:Hn?zn(n):"Object"==(r=zn(n))&&"function"==typeof n.callee?"Arguments":r},Xn=d,Zn=function(t,n,e,r){try{return r?n(Xn(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&Xn(o.call(t)),n}},Kn=it,Jn=$t("iterator"),Vn=Array.prototype,$n=function(t){return void 0!==t&&(Kn.Array===t||Vn[Jn]===t)},te=Qn,ne=$t("iterator"),ee=it,re=s.getIteratorMethod=function(t){if(void 0!=t)return t[ne]||t["@@iterator"]||ee[te(t)]},oe=o(function(t){var n=f,e=Zn,r=$n,o=d,a=yt,i=re,u={},s={},l=t.exports=function(t,l,c,f,h){var p,d,y,v,m=h?function(){return t}:i(t),g=n(c,f,l?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(r(m)){for(p=a(t.length);p>b;b++)if((v=l?g(o(d=t[b])[0],d[1]):g(t[b]))===u||v===s)return v}else for(y=m.call(t);!(d=y.next()).done;)if((v=e(y,g,d.value,l))===u||v===s)return v};l.BREAK=u,l.RETURN=s}),ae=d,ie=l,ue=$t("species"),se=f,le=function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},ce=zt,fe=w,he=u,pe=he.process,de=he.setImmediate,ye=he.clearImmediate,ve=he.MessageChannel,me=0,ge={},be="onreadystatechange",we=function(){var t=+this;if(ge.hasOwnProperty(t)){var n=ge[t];delete ge[t],n()}},_e=function(t){we.call(t.data)};de&&ye||(de=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return ge[++me]=function(){le("function"==typeof t?t:Function(t),n)},Yn(me),me},ye=function(t){delete ge[t]},"process"==st(pe)?Yn=function(t){pe.nextTick(se(we,t,1))}:ve?(Wn=(Bn=new ve).port2,Bn.port1.onmessage=_e,Yn=se(Wn.postMessage,Wn,1)):he.addEventListener&&"function"==typeof postMessage&&!he.importScripts?(Yn=function(t){he.postMessage(t+"","*")},he.addEventListener("message",_e,!1)):Yn=be in fe("script")?function(t){ce.appendChild(fe("script"))[be]=function(){ce.removeChild(this),we.call(t)}}:function(t){setTimeout(se(we,t,1),0)});var je={set:de,clear:ye},xe=u,Ce=je.set,ke=xe.MutationObserver||xe.WebKitMutationObserver,Me=xe.process,Oe=xe.Promise,Pe="process"==st(Me),Te=E,Se=u,Ee=s,Le=O,De=v,Re=$t("species"),Ae=$t("iterator"),Fe=!1;try{var Ie=[7][Ae]();Ie.return=function(){Fe=!0},Array.from(Ie,function(){throw 2})}catch(t){}var Ne,qe,Ge,Ye=u,Be=f,We=Qn,ze=N,Ue=h,He=l,Qe=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t},Xe=oe,Ze=function(t,n){var e,r=ae(t).constructor;return void 0===r||void 0==(e=ae(r)[ue])?n:ie(e)},Ke=je.set,Je=function(){var t,n,e,r=function(){var r,o;for(Pe&&(r=Me.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(Pe)e=function(){Me.nextTick(r)};else if(ke){var o=!0,a=document.createTextNode("");new ke(r).observe(a,{characterData:!0}),e=function(){a.data=o=!o}}else if(Oe&&Oe.resolve){var i=Oe.resolve();e=function(){i.then(r)}}else e=function(){Ce.call(xe,r)};return function(r){var o={fn:r,next:void 0};n&&(n.next=o),t||(t=o,e()),n=o}}(),Ve="Promise",$e=Ye.TypeError,tr=Ye.process,nr=Ye[Ve],er="process"==We(tr=Ye.process),rr=function(){},or=!!function(){try{var t=nr.resolve(1),n=(t.constructor={})[$t("species")]=function(t){t(rr,rr)};return(er||"function"==typeof PromiseRejectionEvent)&&t.then(rr)instanceof n}catch(t){}}(),ar=function(t,n){return t===n||t===nr&&n===Ge},ir=function(t){var n;return!(!Ue(t)||"function"!=typeof(n=t.then))&&n},ur=function(t){return ar(nr,t)?new sr(t):new qe(t)},sr=qe=function(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw $e("Bad Promise constructor");n=t,e=r}),this.resolve=He(n),this.reject=He(e)},lr=function(t){try{t()}catch(t){return{error:t}}},cr=function(t,n){if(!t._n){t._n=!0;var e=t._c;Je(function(){for(var r=t._v,o=1==t._s,a=0,i=function(n){var e,a,i=o?n.ok:n.fail,u=n.resolve,s=n.reject,l=n.domain;try{i?(o||(2==t._h&&pr(t),t._h=1),!0===i?e=r:(l&&l.enter(),e=i(r),l&&l.exit()),e===n.promise?s($e("Promise-chain cycle")):(a=ir(e))?a.call(e,u,s):u(e)):s(r)}catch(t){s(t)}};e.length>a;)i(e[a++]);t._c=[],t._n=!1,n&&!t._h&&fr(t)})}},fr=function(t){Ke.call(Ye,function(){var n,e,r,o=t._v;if(hr(t)&&(n=lr(function(){er?tr.emit("unhandledRejection",o,t):(e=Ye.onunhandledrejection)?e({promise:t,reason:o}):(r=Ye.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=er||hr(t)?2:1),t._a=void 0,n)throw n.error})},hr=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,r=0;e.length>r;)if((n=e[r++]).fail||!hr(n.promise))return!1;return!0},pr=function(t){Ke.call(Ye,function(){var n;er?tr.emit("rejectionHandled",t):(n=Ye.onrejectionhandled)&&n({promise:t,reason:t._v})})},dr=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),cr(n,!0))},yr=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw $e("Promise can't be resolved itself");(n=ir(t))?Je(function(){var r={_w:e,_d:!1};try{n.call(t,Be(yr,r,1),Be(dr,r,1))}catch(t){dr.call(r,t)}}):(e._v=t,e._s=1,cr(e,!1))}catch(t){dr.call({_w:e,_d:!1},t)}}};or||(nr=function(t){Qe(this,nr,Ve,"_h"),He(t),Ne.call(this);try{t(Be(yr,this,1),Be(dr,this,1))}catch(t){dr.call(this,t)}},(Ne=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:Te(t,r,n[r]);return t}(nr.prototype,{then:function(t,n){var e=ur(Ze(this,nr));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=er?tr.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&cr(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),sr=function(){var t=new Ne;this.promise=t,this.resolve=Be(yr,t,1),this.reject=Be(dr,t,1)}),ze(ze.G+ze.W+ze.F*!or,{Promise:nr}),rn(nr,Ve),function(t){var n="function"==typeof Ee[t]?Ee[t]:Se[t];De&&n&&!n[Re]&&Le.f(n,Re,{configurable:!0,get:function(){return this}})}(Ve),Ge=s[Ve],ze(ze.S+ze.F*!or,Ve,{reject:function(t){var n=ur(this);return(0,n.reject)(t),n.promise}}),ze(ze.S+!0*ze.F,Ve,{resolve:function(t){if(t instanceof nr&&ar(t.constructor,this))return t;var n=ur(this);return(0,n.resolve)(t),n.promise}}),ze(ze.S+ze.F*!(or&&function(t,n){if(!n&&!Fe)return!1;var e=!1;try{var r=[7],o=r[Ae]();o.next=function(){return{done:e=!0}},r[Ae]=function(){return o},t(r)}catch(t){}return e}(function(t){nr.all(t).catch(rr)})),Ve,{all:function(t){var n=this,e=ur(n),r=e.resolve,o=e.reject,a=lr(function(){var e=[],a=0,i=1;Xe(t,!1,function(t){var u=a++,s=!1;e.push(void 0),i++,n.resolve(t).then(function(t){s||(s=!0,e[u]=t,--i||r(e))},o)}),--i||r(e)});return a&&o(a.error),e.promise},race:function(t){var n=this,e=ur(n),r=e.reject,o=lr(function(){Xe(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return o&&r(o.error),e.promise}});var vr=s.Promise,mr=r(o(function(t){t.exports={default:vr,__esModule:!0}})),gr=N,br=s,wr=y,_r=cn,jr=qt;!function(t,n){var e=(br.Object||{})[t]||Object[t],r={};r[t]=n(e),gr(gr.S+gr.F*wr(function(){e(1)}),"Object",r)}("keys",function(){return function(t){return jr(_r(t))}});var xr=s.Object.keys,Cr=r(o(function(t){t.exports={default:xr,__esModule:!0}})),kr=o(function(t,r){var o=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return new mr(function(n,r){var a=e,i=t.uri.startsWith("https")?o:a,u=function(t){return t.uri+"?"+Cr(t.qs).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(t.qs[n].toString())}).join("&")}(t);i.get(u,function(t){(t.statusCode<200||t.statusCode>299)&&r(new Error("HTTP Error: "+t.statusCode));var e=[];t.on("data",function(t){return e.push(t)}),t.on("end",function(){return n(JSON.parse(e.join("")))})}).on("error",function(t){return r(t)})})}}),Mr=a&&a.__awaiter||function(t,n,e,r){return new(e||(e=mr))(function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function u(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}s((r=r.apply(t,n)).next())})},Or=kr,Pr=function(){function t(n,e,r){i(this,t),this.name=n,this.date=e,this.location=r}return W(t,null,[{key:"create",value:function(n,e,r){return Mr(this,void 0,void 0,K.mark(function o(){var a,i;return K.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=void 0,i=void 0,n){o.next=3;break}throw new Error("No name was submitted for the person");case 3:if("string"!=typeof e){o.next=9;break}if(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(?::\d{2}\.\d{3})?Z/.test(e)){o.next=6;break}throw new TypeError("Date not formatted according to ISO 8601 (YYYY-MM-DDTHH:mmZ)");case 6:a=e,o.next=10;break;case 9:a=e instanceof Date?e.toISOString():(new Date).toISOString();case 10:if("string"!=typeof r){o.next=16;break}return o.next=13,this.getLatLon(r);case 13:i=o.sent,o.next=21;break;case 16:if(!(r.lat<-90||r.lat>90)){o.next=18;break}throw new RangeError("Latitude must be between -90 and 90");case 18:if(!(r.lng<-180||r.lng>180)){o.next=20;break}throw new RangeError("Longitude must be between -180 and 180");case 20:i=r;case 21:return o.abrupt("return",new t(n,a,i));case 22:case"end":return o.stop()}},o,this)}))}},{key:"getTimezone",value:function(t){return Mr(this,void 0,void 0,K.mark(function n(){return K.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Or.default({uri:"https://maps.googleapis.com/maps/api/timezone/json",qs:{key:this._key,location:t.lat+","+t.lng,timestamp:Math.floor(Date.now()/1e3)}}).then(function(t){return t.timeZoneId},function(t){throw Error(t.errorMessage)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"getLatLon",value:function(t){return Mr(this,void 0,void 0,K.mark(function n(){return K.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Or.default({uri:"https://maps.googleapis.com/maps/api/geocode/json",qs:{key:this._key,address:t}}).then(function(t){return t.results[0].geometry.location},function(t){throw Error(t.error_message)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}}]),t}();Pr._key="AIzaSyAXnIdQxap1WQuzG0XxHfYlCA5O9GQyvuY";var Tr={Person:Pr},Sr={Aspect:function(){function t(n,e){i(this,t),this.p1=n,this.p2=e,this._types={conjunct:{major:!0,angle:0,orb:6,symbol:"<"},semisextile:{major:!1,angle:30,orb:3,symbol:"y"},decile:{major:!1,angle:36,orb:1.5,symbol:">"},novile:{major:!1,angle:40,orb:1.9,symbol:"M"},semisquare:{major:!1,angle:45,orb:3,symbol:"="},septile:{major:!1,angle:51.417,orb:2,symbol:"V"},sextile:{major:!0,angle:60,orb:6,symbol:"x"},quintile:{major:!1,angle:72,orb:2,symbol:"Y"},bilin:{major:!1,angle:75,orb:.9,symbol:"-"},binovile:{major:!1,angle:80,orb:2,symbol:";"},square:{major:!0,angle:90,orb:6,symbol:"c"},biseptile:{major:!1,angle:102.851,orb:2,symbol:"N"},tredecile:{major:!1,angle:108,orb:2,symbol:"X"},trine:{major:!0,angle:120,orb:6,symbol:"Q"},sesquiquadrate:{major:!1,angle:135,orb:3,symbol:"b"},biquintile:{major:!1,angle:144,orb:2,symbol:"C"},inconjunct:{major:!1,angle:150,orb:3,symbol:"n"},treseptile:{major:!1,angle:154.284,orb:1.1,symbol:"B"},tetranovile:{major:!1,angle:160,orb:3,symbol:":"},tao:{major:!1,angle:165,orb:1.5,symbol:"—"},opposition:{major:!0,angle:180,orb:6,symbol:"m"}};var r=n.longitude,o=e.longitude,a=Math.abs(r-o),u=n.isRetrograde(),s=e.isRetrograde(),l=Math.abs(n.speed),c=Math.abs(e.speed),f=!1;a>180+this._types.opposition.orb&&(a=r>o?360-r+o:360-o+r,f=!0);for(var h in this._types){var p=this._types[h];a>=p.angle-p.orb&&a<=p.angle+p.orb&&(this._type=h)}if(void 0===this._type)throw new Error("There is no aspect between these two planets.");this._orb=Number((a%1).toFixed(6));var d=a-this._types[this._type].angle;this._applying=!!((d<0&&!f&&o>r||d>0&&!f&&r>o||d<0&&f&&r>o||d>0&&f&&o>r)&&(!u&&!s&&c>l||u&&s&&l>c||u&&!s)||(d>0&&!f&&o>r||d<0&&!f&&r>o||d>0&&f&&r>o||d<0&&f&&o>r)&&(!u&&!s&&l>c||u&&s&&c>l||!u&&s))}return W(t,[{key:"isApplying",value:function(){return this._applying}},{key:"isMajor",value:function(){return this._types[this._type].major}},{key:"type",get:function(){return this._type}},{key:"orb",get:function(){return this._orb}},{key:"symbol",get:function(){return this._types[this._type].symbol}}]),t}()},Er=o(function(t,n){var e=a&&a.__awaiter||function(t,n,e,r){return new(e||(e=mr))(function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function u(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}s((r=r.apply(t,n)).next())})},r=z,o=Sr,u=kr;!function(t){t[t.Basic=0]="Basic",t[t.Transits=1]="Transits",t[t.Synastry=2]="Synastry",t[t.Combined=3]="Combined",t[t.Davison=4]="Davison",t[t.CombinedTransits=5]="CombinedTransits",t[t.DavisonTransits=6]="DavisonTransits"}(n.ChartType||(n.ChartType={}));var s=n.ChartType,l=function(){function t(n,e,r,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.Basic;i(this,t),this.name=n,this.p1=e,this.p2=o,this.type=a,this._debug=!1,this._signs=[{name:"aries",symbol:"q",v:1},{name:"taurus",symbol:"w",v:1},{name:"gemini",symbol:"e",v:1},{name:"cancer",symbol:"r",v:1},{name:"leo",symbol:"t",v:1},{name:"virgo",symbol:"z",v:1},{name:"libra",symbol:"u",v:1},{name:"scorpio",symbol:"i",v:1},{name:"sagittarius",symbol:"o",v:1},{name:"capricorn",symbol:"p",v:1},{name:"aquarius",symbol:"ü",v:1},{name:"pisces",symbol:"+",v:1}];var u=void 0;switch(a){case s.Combined:u=this.calculateCombinedPlanets(r),this._planets1=this.getPlanets(u),this._ascendant=u.ascendant,this._houses=u.houses;break;case s.CombinedTransits:u=this.calculateCombinedPlanets(r),this._planets1=this.getPlanets(u),this._planets2=this.getPlanets(r[2]),this._ascendant=u.ascendant,this._houses=u.houses;break;default:this._planets1=this.getPlanets(r[0]),r[1]&&(this._planets2=this.getPlanets(r[1])),this._ascendant=r[0].ascendant,this._houses=r[0].houses}this.calculateAspects()}return W(t,[{key:"getPlanets",value:function(t){var n=[];for(var e in t.planets){var o=t.planets[e];n.push(new r.Planet(o.name,o.lon,o.lat,o.spd))}return n}},{key:"calculateAspects",value:function(){if(this._aspects=[],this._planets2)for(var t in this._planets1)for(var n in this._planets2)try{this._aspects.push(new o.Aspect(this._planets1[t],this._planets2[n]))}catch(t){this._debug&&console.error(t)}else for(var e in this._planets1)for(var r in this._planets1)if(e!==r&&r>e)try{this._aspects.push(new o.Aspect(this._planets1[e],this._planets1[r]))}catch(t){this._debug&&console.error(t)}}},{key:"calculateCombinedPlanets",value:function(t){var n={planets:{sun:{name:null,lon:null,lat:null,spd:null,r:null},moon:{name:null,lon:null,lat:null,spd:null,r:null},mercury:{name:null,lon:null,lat:null,spd:null,r:null},venus:{name:null,lon:null,lat:null,spd:null,r:null},mars:{name:null,lon:null,lat:null,spd:null,r:null},jupiter:{name:null,lon:null,lat:null,spd:null,r:null},saturn:{name:null,lon:null,lat:null,spd:null,r:null},uranus:{name:null,lon:null,lat:null,spd:null,r:null},neptune:{name:null,lon:null,lat:null,spd:null,r:null},pluto:{name:null,lon:null,lat:null,spd:null,r:null},"north node":{name:"north node",lon:null,lat:null,spd:null,r:null},"south node":{name:"south node",lon:null,lat:null,spd:null,r:null},chiron:{name:null,lon:null,lat:null,spd:null,r:null},pholus:{name:null,lon:null,lat:null,spd:null,r:null},ceres:{name:null,lon:null,lat:null,spd:null,r:null},pallas:{name:null,lon:null,lat:null,spd:null,r:null},juno:{name:null,lon:null,lat:null,spd:null,r:null},vesta:{name:null,lon:null,lat:null,spd:null,r:null},cupido:{name:null,lon:null,lat:null,spd:null,r:null},chariklo:{name:null,lon:null,lat:null,spd:null,r:null},chaos:{name:null,lon:null,lat:null,spd:null,r:null},eris:{name:null,lon:null,lat:null,spd:null,r:null},nessus:{name:null,lon:null,lat:null,spd:null,r:null}},houses:[null,null,null,null,null,null,null,null,null,null,null,null],ascendant:null,mc:null};for(var e in t[0].planets)n.planets[e].name=e,n.planets[e].lon=this.getLonMidpoint(t[0].planets[e].lon,t[1].planets[e].lon),n.planets[e].lat=(t[0].planets[e].lat+t[1].planets[e].lat)/2,n.planets[e].spd=(t[0].planets[e].spd+t[1].planets[e].spd)/2;for(var r in t[0].houses)n.houses[r]=this.getLonMidpoint(t[0].houses[r],t[1].houses[r]);return n.ascendant=this.getLonMidpoint(t[0].ascendant,t[1].ascendant),n.mc=this.getLonMidpoint(t[0].mc,t[1].mc),n}},{key:"getLonMidpoint",value:function(t,n){var e=void 0,r=void 0;return t===n?t:(e=t>n?t:n,r=t<n?t:n,e-r<=180?(e+r)/2:((r+360-e)/2+e)%360)}},{key:"refreshTransits",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(this,void 0,void 0,K.mark(function e(){var r;return K.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.Synastry!==this.type){e.next=2;break}throw new Error("You cannot refresh transits on a synastry chart");case 2:return null===n&&(n=(new Date).toISOString()),e.next=5,t.getChartData(n,this.p1.location);case 5:r=e.sent,this._planets2=this.getPlanets(r),this.calculateAspects();case 8:case"end":return e.stop()}},e,this)}))}},{key:"houses",get:function(){return this._houses}},{key:"aspects",get:function(){return this._aspects}},{key:"ascendant",get:function(){return this._ascendant}},{key:"innerPlanets",get:function(){return this._planets2?this._planets1:[]}},{key:"outerPlanets",get:function(){return this._planets2?this._planets2:this._planets1}}],[{key:"getChartData",value:function(t,n){return e(this,void 0,void 0,K.mark(function e(){return K.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default({uri:"http://morphemeris.test/ephemeris.php",qs:{date:t,lat:n.lat,lon:n.lng}}).then(function(t){return t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}]),t}();n.Chart=l}),Lr=a&&a.__awaiter||function(t,n,e,r){return new(e||(e=mr))(function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function u(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(i,u)}s((r=r.apply(t,n)).next())})},Dr=Er,Rr=function(){function t(){i(this,t)}return W(t,null,[{key:"create",value:function(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.ChartType.Basic;return Lr(this,void 0,void 0,K.mark(function a(){var i,u,s;return K.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==n&&void 0!==n&&0!==n.length){a.next=2;break}throw Error("Chart must have a name (ChartFactory)");case 2:if(null!==e&&void 0!==e){a.next=4;break}throw Error("Person cannot be null or undefined (ChartFactory)");case 4:a.t0=o,a.next=a.t0===Dr.ChartType.Synastry?7:a.t0===Dr.ChartType.Combined?7:a.t0===Dr.ChartType.CombinedTransits?7:a.t0===Dr.ChartType.Davison?7:9;break;case 7:if(null!==r){a.next=9;break}throw Error("2nd Person cannot be null for this chart type (ChartFactory)");case 9:i=[],u=void 0,s=void 0,a.t1=o,a.next=a.t1===Dr.ChartType.Transits?13:a.t1===Dr.ChartType.Synastry?17:a.t1===Dr.ChartType.Combined?17:a.t1===Dr.ChartType.CombinedTransits?21:a.t1===Dr.ChartType.Davison?25:a.t1===Dr.ChartType.DavisonTransits?33:39;break;case 13:return a.next=15,mr.all([Dr.Chart.getChartData(e.date,e.location),Dr.Chart.getChartData((new Date).toISOString(),e.location)]);case 15:return i=a.sent,a.abrupt("return",new Dr.Chart(n,e,i,null,o));case 17:return a.next=19,mr.all([Dr.Chart.getChartData(e.date,e.location),Dr.Chart.getChartData(r.date,r.location)]);case 19:return i=a.sent,a.abrupt("return",new Dr.Chart(n,e,i,null,o));case 21:return a.next=23,mr.all([Dr.Chart.getChartData(e.date,e.location),Dr.Chart.getChartData(r.date,r.location),Dr.Chart.getChartData((new Date).toISOString(),e.location)]);case 23:return i=a.sent,a.abrupt("return",new Dr.Chart(n,e,i,null,o));case 25:return u=t.getDatetimeMidpoint(e.date,r.date),s=t.getGeoMidpoint(e.location,r.location),a.t2=i,a.next=30,Dr.Chart.getChartData(u,s);case 30:return a.t3=a.sent,a.t2.push.call(a.t2,a.t3),a.abrupt("return",new Dr.Chart(n,e,i));case 33:return u=t.getDatetimeMidpoint(e.date,r.date),s=t.getGeoMidpoint(e.location,r.location),a.next=37,mr.all([Dr.Chart.getChartData(u,s),Dr.Chart.getChartData((new Date).toISOString(),s)]);case 37:return i=a.sent,a.abrupt("return",new Dr.Chart(n,e,i,null,o));case 39:return a.t4=i,a.next=42,Dr.Chart.getChartData(e.date,e.location);case 42:return a.t5=a.sent,a.t4.push.call(a.t4,a.t5),a.abrupt("return",new Dr.Chart(n,e,i));case 45:case"end":return a.stop()}},a,this)}))}},{key:"getGeoMidpoint",value:function(n,e){var r=t.toRadians(n.lat),o=t.toRadians(n.lng),a=t.toRadians(e.lat),i=t.toRadians(e.lng),u=Math.cos(a)*Math.cos(i-o),s=Math.cos(a)*Math.sin(i-o),l=o+Math.atan2(s,Math.cos(r)+u),c=Math.atan2(Math.sin(r)+Math.sin(a),Math.sqrt(Math.pow(Math.cos(r)+u,2)+Math.pow(s,2)));return{lat:t.toDegrees(c),lng:t.toDegrees(l)}}},{key:"getDatetimeMidpoint",value:function(t,n){var e=new Date(t).getTime(),r=new Date(n).getTime(),o=void 0;return e===r?t:(o=e<r?e+(r-e)/2:r+(e-r)/2,new Date(o).toISOString())}}]),t}();Rr.toRadians=function(t){return t*Math.PI/180},Rr.toDegrees=function(t){return 180*t/Math.PI};var Ar={ChartFactory:Rr},Fr=z.Planet,Ir=Tr.Person,Nr=Sr.Aspect,qr=Er,Gr=qr.Chart,Yr=qr.ChartType,Br=Ar.ChartFactory,Wr={Planet:Fr,Person:Ir,Aspect:Nr,Chart:Gr,ChartType:Yr,ChartFactory:Br};t.default=Wr,t.Planet=Fr,t.Person=Ir,t.Aspect=Nr,t.Chart=Gr,t.ChartType=Yr,t.ChartFactory=Br,Object.defineProperty(t,"__esModule",{value:!0})});
